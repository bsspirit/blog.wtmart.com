title: 国债收益率曲线可视化项目
date: 2013-06-05 09:05:20
author: Weiping Lin
---

这个项目前段时间我自己折腾过一阵，但是后来没有折腾成，所以写到这个post里面呼唤大家一起来解决这个问题。这个其实是一个挺简单的问题，就是每一天国债的交易价格都会生成一条收益率曲线，由于以后很多衍生品的定价将会根据这条曲线的变化情况去定价，所以我就想说将这个收益率曲线变化的过程可视化出来。调用数据的函数我已经都写好了，下面是怎么把数据调进R的code。

```{r}
Sys.setenv(TEST="yes");
source("/home/amg/svn/yieldCurve/profiling/Rprofile.R");
startDate    <- 20120101;
endDate      <- 20130604;
dates        <- date.convert(date.range(startDate, endDate, region="CN"), format="YYYYMMDD");
lst          <- list();
for(date in dates){
 cat(date);
 lst[[date]] <- yieldCurve(date);
 cat("\b\b\b\b\b\b\b\b");
}
data         <- df.rbindList(lst);
data         <- data[,c("date","YrMat","YTM")];
```

上面的code是吧数据从csv文件中读取到data的dataframe中，变量的含义比较明显，date即是交易日期，YrMat是债券的剩余期限（这里主要取1,2,3,5,7,10,15年），YTM就是债券对应的到期收益率了，具体的，比如2013-06-04这一天的收益率曲线的形状如下：

![yield curve](/uploads/2013/06/Rplot.png)